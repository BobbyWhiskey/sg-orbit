import { IconButton } from "@react-components/button";
import { CrossIcon, EditIcon } from "@react-components/icons";
import { HocWarning, InstallReactComponents, Props, ReactComponentsLayout } from "@blocks";
import { InnerNumberInput, NumberInput } from "@react-components/number-input";
import { Meta, Preview, Story } from "@storybook/addon-docs/blocks";
import { RefLogger, createComponentSection, paramsBuilder } from "@utils";
import Imports from "./Imports.mdx";

<Meta
    title={createComponentSection("NumberInput")}
    parameters={paramsBuilder()
        .canvasLayout({ width: "80%" })
        .docsLayout(<ReactComponentsLayout semanticPath="/elements/input" />)
        .build()}
/>

# NumberInput

A number input allow a user to enter and edit a number.

## Installation

<InstallReactComponents imports={<Imports />} />

## Props

<HocWarning componentName="Input" semanticPath="/elements/input" />

<Props
    componentsDefinitions={[
        { displayName: "NumberInput", component: InnerNumberInput }
    ]}
/>

## Usage

### Default

A default number input.

<Preview>
    <Story name="default">
        <NumberInput />
    </Story>
</Preview>

### Value

A number input can have a value.

<Preview>
    <Story name="value">
        <NumberInput defaultValue={1} />
    </Story>
</Preview>

### Min / Max

A number input can have a minimum / maximum value.

<Preview>
    <Story name="boundaries">
        <NumberInput min={-5} max={5} />
    </Story>
</Preview>

### Step

A number input increment can be customized.

<Preview>
    <Story name="step">
        <NumberInput step={5} />
    </Story>
</Preview>

### Disabled

A number input can be disabled.

<Preview>
    <Story name="disabled">
        <NumberInput disabled placeholder="Amount" />
    </Story>
</Preview>

### Readonly

A number input can be readonly.

<Preview>
    <Story name="readonly">
        <NumberInput readOnly value={1} />
    </Story>
</Preview>

### Fluid

A number input can take the width of its container.

<Preview>
    <Story name="fluid">
        <NumberInput fluid placeholder="Amount" />
    </Story>
</Preview>

### Icon

A number input can be formatted with an [icon](?path=/docs/materials-icons--page).

<Preview>
    <Story name="icon">
        <div className="flex items-space-between">
            <NumberInput icon={<EditIcon />} placeholder="Amount" />
            <NumberInput icon={<EditIcon />} placeholder="Amount" iconPosition="left"/>
        </div>
    </Story>
</Preview>

<Story
    name="icon & loading"
    parameters={paramsBuilder()
        .excludeFromDocs()
        .build()}
>
    <div className="flex items-space-between">
        <NumberInput icon={<EditIcon />} loading />
        <NumberInput icon={<EditIcon />} loading iconPosition="left"/>
    </div>
</Story>

### Button

A number input can contain a [button](?path=/docs/components-button--default-story).

<Preview>
    <Story name="button">
        <NumberInput button={<IconButton><CrossIcon /></IconButton>} placeholder="Amount" />
    </Story>
</Preview>

<Story
    name="button & loading"
    parameters={paramsBuilder()
        .excludeFromDocs()
        .build()}
>
    <NumberInput button={<Button icon={<CrossIcon />} />} placeholder="Amount" loading />
</Story>

### Loading

A number input can show that it is currently loading data.

<Preview>
    <Story name="loading">
        <NumberInput loading placeholder="Amount" />
    </Story>
</Preview>

### Size

A number input can vary in size.

Can be set to: `"small"`, `"large"` or omitted.

<Preview>
    <Story name="size">
        <div className="flex items-end items-space-between">
            <div className="flex-auto">
                <NumberInput size="small" fluid placeholder="Amount" />
            </div>
            <div className="flex-auto">
                <NumberInput fluid placeholder="Amount" />
            </div>
            <div className="flex-auto">
                <NumberInput size="large" fluid placeholder="Amount" />
            </div>
        </div>
    </Story>
</Preview>

### Error

A number input field can show that the data contains errors.

<Preview>
    <Story name="error">
        <NumberInput error placeholder="Amount" />
    </Story>
</Preview>

### Transparent

A number input can be transparent.

<Preview>
    <Story name="transparent">
        <NumberInput transparent placeholder="Amount" />
    </Story>
</Preview>

<Story
    name="autofocus"
    parameters={paramsBuilder()
        .excludeFromDocs()
        .build()}
>
    <div className="flex items-space-between">
        <NumberInput autofocus placeholder="Amount" />
        <NumberInput autofocus disabled placeholder="Amount" />
    </div>
</Story>

<Story
    name="autofocus delay"
    parameters={paramsBuilder()
        .excludeFromDocs()
        .build()}
>
    <div className="flex items-space-between">
        <NumberInput autofocus autofocusDelay={500} placeholder="Amount" />
        <NumberInput autofocus disabled autofocusDelay={500} placeholder="Amount" />
    </div>
</Story>

<Story
    name="ref"
    parameters={paramsBuilder()
        .excludeFromDocs()
        .build()}
>
    <RefLogger><NumberInput /></RefLogger>
</Story>

## API

To use an [API function](https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement#Methods), first get a [ref](https://reactjs.org/docs/refs-and-the-dom.html) on the number input component, then call the API function.

Here's an example for the `focus` function:

```jsx dark
function MyComponent() {
    const ref = useRef();

    return (
        <div onFocus={() => { ref.focus(); }}>
            <NumberInput ref={ref} />
        </div>
    );
}
```
