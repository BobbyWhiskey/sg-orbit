import { ArgsTable, Canvas, Meta, Story } from "@storybook/addon-docs/blocks";
import { AsyncTabs } from "./AsyncTabs.sample";
import { ComponentInfo, FileCanvas } from "@stories/components";
import { Content, Header, InnerContent, InnerHeader } from "@react-components/view";
import { ControlledTabs } from "./ControlledTabs.sample";
import { CustomTabs } from "./CustomTabs.sample";
import { Fragment } from "react";
import { InnerItem, Item } from "@react-components/collection";
import { InnerTab, InnerTabPanel, InnerTabs, Tabs } from "@react-components/tabs";
import { LightbulbIcon, NotificationIcon } from "@react-components/icons";
import { Lozenge } from "@react-components/lozenge";
import { Text } from "@react-components/text";
import { paramsBuilder } from "@stories/utils";

<Meta
    title="Components/Tabs"
    id="tabs"
/>

# Tabs

Tabs are used to organize content by grouping similar information on the same page.

<ComponentInfo
    usage={"import { Tabs, Item, Header, Content } from \"@orbit-ui/react-components\""}
    ariaPath="#tabpanel"
    githubPath="/packages/react-components/src/tabs/src"
/>

## Accessibility

An accessible title must be provided through aria-label prop. See [WAI-ARIA](https://www.w3.org/TR/wai-aria-practices/#wai-aria-roles-states-and-properties-20).

## Usage

### Default

A default tabs.

<Canvas>
    <Story name="default">
        <Tabs aria-label="Planets">
            <Item>
                <Header>Mars</Header>
                <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
            </Item>
            <Item>
                <Header>Jupiter</Header>
                <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
            </Item>
            <Item>
                <Header>Venus</Header>
                <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
            </Item>
        </Tabs>
    </Story>
</Canvas>

### Icon

A tab can contain [icons](?path=/docs/icon-gallery--page).

<Canvas>
    <Story name="icon">
        <Tabs aria-label="Planets">
            <Item>
                <Header>Mars</Header>
                <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
            </Item>
            <Item>
                <Header>
                    <NotificationIcon />
                    <Text>Jupiter</Text>
                </Header>
                <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
            </Item>
            <Item>
                <Header>Venus</Header>
                <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
            </Item>
        </Tabs>
    </Story>
</Canvas>

### Lozenge

A tab can contains a [lozenge](?path=/docs/components-lozenge--default-story).

<Canvas>
    <Story name="lozenge">
        <Tabs aria-label="Planets">
            <Item>
                <Header>Mars</Header>
                <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
            </Item>
            <Item>
                <Header>
                    <Text>Jupiter</Text>
                    <Lozenge>New</Lozenge>
                </Header>
                <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
            </Item>
            <Item>
                <Header>Venus</Header>
                <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
            </Item>
        </Tabs>
    </Story>
</Canvas>

### Render props

A tab can update is content based on the `isActive` value by providing a render prop function.

<Canvas>
    <Story name="render props">
        <Tabs aria-label="Planets">
            <Item>
                {({ isActive }) => (
                    <>
                        <Header>
                            {isActive ? <LightbulbIcon /> : <NotificationIcon />}
                            <Text>Mars</Text>
                        </Header>
                        <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
                    </>
                )}
            </Item>
            <Item>
                <Header>Jupiter</Header>
                <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
            </Item>
            <Item>
                <Header>Venus</Header>
                <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
            </Item>
        </Tabs>
    </Story>
</Canvas>

### Custom components

The previous [render props](#render-props) example could also be achieve with a custom component.

<FileCanvas filePath="/tabs/docs/CustomTabs">
    <CustomTabs />
</FileCanvas>

### Data tabs

You can supply tabs content with an array instead of using the granular components.

<Canvas>
    <Story name="data render">
        <Tabs aria-label="Planets">
            {[
                { header: "Mars", content: "Mars is the fourth planet from the Sun and the second-smallest planet." },
                { header: "Jupiter", content: "Jupiter is the fifth planet from the Sun and the largest in the Solar System." },
                { header: "Venus", content: "Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty." }
            ]
                .map(({ header, content }) =>
                    <Item key={header}>
                        <Header>{header}</Header>
                        <Content>{content}</Content>
                    </Item>
                )}
        </Tabs>
    </Story>
</Canvas>

### Manually activated tabs

By default, tabs are activated automatically. This means when you use the arrow keys to change tabs, the tab is activated and focused.

> The content of a tab should ideally be preloaded. However, if switching to a tab panel causes a network request and possibly a page refresh, there might be some notable latency and this might affect the experience for keyboard and screen reader users.

In this scenario, you should use a manually activated tab, it moves focus without activating the tabs. With focus on a specifc tab, users can activate a tab by pressing <kbd>Space</kbd> or <kbd>Enter</kbd>.

<Canvas>
    <Story name="manual">
        <Tabs manual aria-label="Planets">
            <Item>
                <Header>Mars</Header>
                <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
            </Item>
            <Item>
                <Header>Jupiter</Header>
                <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
            </Item>
            <Item>
                <Header>Venus</Header>
                <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
            </Item>
        </Tabs>
    </Story>
</Canvas>

### Async content

We recommend using the [render props](#render-props) syntax to load async content.

<FileCanvas filePath="/tabs/docs/AsyncTabs">
    <AsyncTabs />
</FileCanvas>

### Orientation

A tabs component can render vertically.

<Canvas>
    <Story name="orientation">
        <Tabs orientation="vertical" aria-label="Planets">
            <Item>
                <Header>Mars</Header>
                <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
            </Item>
            <Item>
                <Header>Jupiter</Header>
                <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
            </Item>
            <Item>
                <Header>Venus</Header>
                <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
            </Item>
        </Tabs>
    </Story>
</Canvas>

### Fluid

A tabs component can split the width of it's container equally between his tabs.

<Canvas>
    <Story name="fluid">
        <Tabs fluid aria-label="Planets">
            <Item>
                <Header>Mars</Header>
                <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
            </Item>
            <Item>
                <Header>Jupiter</Header>
                <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
            </Item>
            <Item>
                <Header>Venus</Header>
                <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
            </Item>
        </Tabs>
    </Story>
</Canvas>

### Disabled

A tab can be disabled.

<Canvas>
    <Story name="disabled tab">
        <Tabs aria-label="Planets">
            <Item>
                <Header>Mars</Header>
                <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
            </Item>
            <Item disabled>
                <Header>Jupiter</Header>
                <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
            </Item>
            <Item>
                <Header>Venus</Header>
                <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
            </Item>
        </Tabs>
    </Story>
</Canvas>

### Controlled

The selected `index` can be handled in controlled mode.

<FileCanvas filePath="/tabs/docs/ControlledTabs">
    <ControlledTabs />
</FileCanvas>

## API

### Tabs

<ComponentInfo
    usage={"import { Tabs } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerTabs} />

### Item

<ComponentInfo
    usage={"import { Item } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerItem} />

### Header

<ComponentInfo
    usage={"import { Header } from \"@orbit-ui/react-components\""}
    slots={["icon", "text", "lozenge"]}
    compact
/>

<ArgsTable of={InnerHeader} />

### Content

<ComponentInfo
    usage={"import { Content } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerContent} />

### Tab

<ComponentInfo
    usage={"import { Tab } from \"@orbit-ui/react-components\""}
    slots={["icon", "text", "lozenge"]}
    compact
/>

<ArgsTable of={InnerTab} />

### TabPanel

<ComponentInfo
    usage={"import { TabPanel } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerTabPanel} />

<Story
    name="playground"
    parameters={paramsBuilder()
        .component(InnerTabs)
        .excludeFromDocs()
        .build()}
>
    {args =>
        <Tabs aria-label="Planets" {...args}>
            <Item>
                <Header>Mars</Header>
                <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
            </Item>
            <Item>
                <Header>Jupiter</Header>
                <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
            </Item>
            <Item>
                <Header>Venus</Header>
                <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
            </Item>
        </Tabs>
    }
</Story>
