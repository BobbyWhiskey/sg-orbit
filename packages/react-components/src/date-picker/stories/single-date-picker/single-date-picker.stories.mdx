import { ControlledSingleDatePicker } from "./controlled-single-date-picker.sample";
import { FilePreview, InstallReactComponents, Props, ReactComponentsLayout } from "@blocks";
import { InnerSingleDatePickerCalendar, InnerSingleDatePickerInput, SingleDatePicker } from "@react-components/date-picker";
import { Meta, Preview, Story } from "@storybook/addon-docs/blocks";
import { createComponentSection, paramsBuilder } from "@utils";
import { logDateChanged } from "../utils";
import Imports from "./imports.mdx";
import MomentUsage from "../moment-usage.mdx";
import moment from "moment";

<Meta
    title={createComponentSection("DatePicker/single")}
    parameters={paramsBuilder()
        .canvasLayout({ width: "80%" })
        .docsLayout(<ReactComponentsLayout sourcePath="/packages/react-components/src/date-picker/src/single" />)
        .build()}
/>

# SingleDatePicker

A single date picker allow a user to select a date.

## Installation

<InstallReactComponents imports={<Imports />} />

## Props

<Props
    componentsDefinitions={[
        { displayName: "SingleDatePicker", component: SingleDatePicker },
        { displayName: "SingleDatePicker.Input", component: InnerSingleDatePickerInput },
        { displayName: "SingleDatePicker.Calendar", component: InnerSingleDatePickerCalendar },
        { displayName: "SingleDatePicker.Buttons", component: SingleDatePicker.Buttons }
    ]}
/>

## Usage

### momentjs

<MomentUsage />

### Default

A default single date picker.

<Preview>
    <Story name="default">
        < SingleDatePicker
            onDateChange={logDateChanged}
        />
    </Story>
</Preview>

### Selected date

A single date picker can have an initial date.

<Preview>
    <Story name="selected-date">
        <SingleDatePicker
            date={moment()}
            onDateChange={logDateChanged}
        />
    </Story>
</Preview>

### Minimum date restriction

A single date picker can enforce a minimum selectable date.

<Preview>
    <Story
        name="min date restriction"
        parameters={paramsBuilder()
            .storyValues({
                minDate: moment().subtract(2, "weeks").format("MMMM Do YYYY")
            })
            .build()}
    >
        <SingleDatePicker
            minDate={moment().subtract(2, "weeks")}
            onDateChange={logDateChanged}
        />
    </Story>
</Preview>

### Maximum date restriction

A single date picker can enforce a maximum selectable date.

<Preview>
    <Story
        name="max date restriction"
        parameters={paramsBuilder()
            .storyValues({
                maxDate: moment().add(2, "weeks").format("MMMM Do YYYY")
            })
            .build()}
    >
        <SingleDatePicker
            maxDate={moment().add(2, "weeks")}
            onDateChange={logDateChanged}
        />
    </Story>
</Preview>

### Minimum & maximum dates restriction

A single date picker can enforce a minimum & maximum selectable date.

<Preview>
    <Story
        name="min & max dates restriction"
        parameters={paramsBuilder()
            .storyValues({
                minDate: moment().subtract(2, "weeks").format("MMMM Do YYYY"),
                maxDate: moment().add(2, "weeks").format("MMMM Do YYYY")
            })
            .build()}
    >
        <SingleDatePicker
            minDate={moment().subtract(2, "weeks")}
            maxDate={moment().add(2, "weeks")}
            onDateChange={logDateChanged}
        />
    </Story>
</Preview>

### Display 2 months

A single date picker can display 2 calendars.

<Preview>
    <Story name="two months visible">
        <SingleDatePicker
            minDate={moment().subtract(2, "weeks")}
            maxDate={moment().add(2, "weeks")}
            numberOfMonths={2}
            onDateChange={logDateChanged}
        />
    </Story>
</Preview>

### Disabled

A single date picker can be disabled.

<Preview>
    <Story name="disabled">
        <SingleDatePicker
            disabled
            onDateChange={logDateChanged}
        />
    </Story>
</Preview>

### Fluid

A single date picker can take the width of its container.

<Preview>
    <Story name="fluid">
        <SingleDatePicker
            fluid
            onDateChange={logDateChanged}
        />
    </Story>
</Preview>

### Size

A single date picker can vary in size.

<Preview>
    <Story name="size">
        <div className="flex items-end items-space-between">
            <SingleDatePicker size="small" fluid onDateChange={logDateChanged} />
            <SingleDatePicker fluid onDateChange={logDateChanged} />
            <SingleDatePicker size="large" fluid onDateChange={logDateChanged} />
        </div>
    </Story>
</Preview>

### Upward

A single date picker prefered vertical opening position can be upward.

<Preview>
    <Story
        name="upward"
        parameters={paramsBuilder()
            .canvasLayout({ marginTop: "400px" })
            .build()}
    >
        <SingleDatePicker
            upward
            onDatesChange={logDateChanged}
        />
    </Story>
</Preview>

### Direction

A single date picker prefered horizontal opening position can be `"left"` or `"right"`.

<Preview>
    <Story name="direction">
        <div className="flex items-space-between">
            <SingleDatePicker
                direction="left"
                onDatesChange={logDateChanged}
            />
            <SingleDatePicker
                direction="right"
                onDatesChange={logDateChanged}
            />
        </div>
    </Story>
</Preview>

### Pinned

A single date picker opening position can be forced even if there isn't enough space.

<Preview>
    <Story name="pinned">
        <SingleDatePicker
            pinned
            upward={false}
            onDatesChange={logDateChanged}
        />
    </Story>
</Preview>

### Controlled

A single date picker can handle `date` and `open` state in controlled mode.

<FilePreview filePath="/date-picker/stories/single-date-picker/controlled-single-date-picker">
    <ControlledSingleDatePicker
        date={moment()}
        onDateChange={logDateChanged}
    />
</FilePreview>


