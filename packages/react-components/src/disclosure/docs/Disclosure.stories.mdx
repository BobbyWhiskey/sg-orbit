import { ArgsTable, Canvas, Meta, Story } from "@storybook/addon-docs/blocks";
import { Button } from "@react-components/button";
import { ComponentInfo, FileCanvas, Tagline } from "@stories/components";
import { Content, InnerContent } from "@react-components/view";
import { ControlledDisclosure } from "./ControlledDisclosure.sample";
import { CustomDisclosureTrigger } from "./CustomDisclosureTrigger.sample";
import { Disclosure, DisclosureArrow, InnerDisclosure } from "@react-components/disclosure";
import { Text } from "@react-components/text";
import { paramsBuilder } from "@stories/utils";

<Meta
    title="Components/Disclosure"
    id="disclosure"
/>

# Disclosure

<Tagline>The disclosure component is used to create regions of content that can expand/collapse with a simple animation.</Tagline>

<ComponentInfo
    usage={"import { Disclosure, Content } from \"@orbit-ui/react-components\""}
    ariaPath="#disclosure"
    githubPath="/packages/react-components/src/disclosure/src"
/>

## Accessibility

The disclosure's trigger that shows and hides the content must be a [button element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button) or have the [role button](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/button_role).

## Usage

### Default

A default disclosure using a button.

<Canvas>
    <Story name="default">
        <Disclosure>
            <Button>EVE Online</Button>
            <Content>Eve Online is a space-based, persistent world massively multiplayer online role-playing game (MMORPG) developed and published by CCP Games. Players of Eve Online can participate in a number of in-game professions and activities, including mining, piracy, manufacturing, trading, exploration, and combat (both player versus environment and player versus player). The game contains a total of 7,800 star systems that can be visited by players.</Content>
        </Disclosure>
    </Story>
</Canvas>

### Render props

A disclosure component can update is content based on the `isOpen` value by providing a render prop function.

<Canvas>
    <Story name="render props">
        <Disclosure>
            {({ isOpen }) => (
                <>
                    <Button color={isOpen ? "primary" : "secondary"}>
                        EVE Online
                    </Button>
                    <Content>Eve Online is a space-based, persistent world massively multiplayer online role-playing game (MMORPG) developed and published by CCP Games. Players of Eve Online can participate in a number of in-game professions and activities, including mining, piracy, manufacturing, trading, exploration, and combat (both player versus environment and player versus player). The game contains a total of 7,800 star systems that can be visited by players.</Content>
                </>
            )}
        </Disclosure>
    </Story>
</Canvas>

### Custom trigger

The previous [render props](#render-props) example could also be achieve by using a custom component. It's possible by using the `useDisclosureContext`.

<FileCanvas filePath="/disclosure/docs/CustomDisclosureTrigger">
    <CustomDisclosureTrigger />
</FileCanvas>

## Disclosure arrow

For some cases you can use a [disclosure arrow](?path=/docs/disclosure-arrow--context) component to hint that activating the button will display additional content.

<Canvas>
    <Story name="disclosure arrow">
        <Disclosure>
            <Button>
                <Text>EVE Online</Text>
                <DisclosureArrow slot="right-icon" />
            </Button>
            <Content>Eve Online is a space-based, persistent world massively multiplayer online role-playing game (MMORPG) developed and published by CCP Games. Players of Eve Online can participate in a number of in-game professions and activities, including mining, piracy, manufacturing, trading, exploration, and combat (both player versus environment and player versus player). The game contains a total of 7,800 star systems that can be visited by players.</Content>
        </Disclosure>
    </Story>
</Canvas>

### Controlled

A disclosure component can handle `open` state in controlled mode.

<FileCanvas filePath="/disclosure/docs/ControlledDisclosure">
    <ControlledDisclosure />
</FileCanvas>

## API

### Disclosure

<ComponentInfo
    usage={"import { Disclosure } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerDisclosure} />

### Content

<ComponentInfo
    usage={"import { Content } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerContent} />

<Story
    name="playground"
    parameters={paramsBuilder()
        .component(InnerDisclosure)
        .excludeFromDocs()
        .build()}
>
    {args =>
        <InnerDisclosure {...args}>
            <Button>EVE Online</Button>
            <Content>Eve Online is a space-based, persistent world massively multiplayer online role-playing game (MMORPG) developed and published by CCP Games. Players of Eve Online can participate in a number of in-game professions and activities, including mining, piracy, manufacturing, trading, exploration, and combat (both player versus environment and player versus player). The game contains a total of 7,800 star systems that can be visited by players.</Content>
        </InnerDisclosure>
    }
</Story>
