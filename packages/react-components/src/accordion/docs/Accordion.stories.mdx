import { Accordion, InnerAccordion, InnerAccordionHeader, InnerAccordionPanel } from "@react-components/accordion";
import { Content, Header, InnerContent, InnerHeader } from "@react-components/view";
import { ControlledAccordion } from "./ControlledAccordion.sample";
import { CustomAccordion } from "./CustomAccordion.sample";
import { FilePreview, ReactComponentsLayout } from "@blocks";
import { Fragment } from "react";
import { HelpIcon, InfoIcon, NotificationIcon } from "@react-components/icons";
import { InnerItem, Item } from "@react-components/collection";
import { Meta, Preview, Props, Story } from "@storybook/addon-docs/blocks";
import { RefLogger, paramsBuilder } from "@utils";
import { Stack } from "@react-components/layout";
import { Text } from "@react-components/text";

<Meta
    title="Content|Accordion"
    parameters={paramsBuilder()
        .canvasLayout({ width: "80%" })
        .docsLayout(<ReactComponentsLayout sourcePath="/packages/react-components/src/accordion/src" />)
        .build()}
/>

# Accordion

Accordions are commonly used to reduce the need to scroll when presenting multiple sections of content on a single page.

<dl>
    <div>
        <dt>usage</dt>
        <dd>import Accordion from @orbit-ui/react-components</dd>
    </div>
    <div>
        <dt>wai-aria</dt>
        <dd><a href="https://www.w3.org/TR/wai-aria-practices/#accordion">https://www.w3.org/TR/wai-aria-practices/#accordion</a></dd>
    </div>
</dl>

## Accessibility

Each accordion header is wrapped in an [heading element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements). That heading element should have a level that is appropriate for the information architecture of the page. This is done by providing an `as` prop to the `<Header>` component.

## Usage

### Icon

An accordion item can contain [icons](?path=/docs/materials-icons--page).

<Preview>
    <Story name="icon">
        <Accordion>
            <Item>
                <Header as="h3">
                    <NotificationIcon />
                    <Text>Mars</Text>
                </Header>
                <Content>Mars is the fourth planet from the Sun and the second-smallest planet in the Solar System.</Content>
            </Item>
            <Item>
                <Header as="h3">
                    <InfoIcon />
                    <Text>Jupiter</Text>
                </Header>
                <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
            </Item>
            <Item>
                <Header as="h3">
                    <HelpIcon />
                    <Text>Venus</Text>
                </Header>
                <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
            </Item>
        </Accordion>
    </Story>
</Preview>

### Multiple

An accordion can allow multiple items to be expanded at once.

<Preview>
    <Story name="multiple">
        <Accordion multiple>
            <Item>
                <Header as="h3">Mars</Header>
                <Content>Mars is the fourth planet from the Sun and the second-smallest planet in the Solar System.</Content>
            </Item>
            <Item>
                <Header as="h3">Jupiter</Header>
                <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
            </Item>
            <Item>
                <Header as="h3">Venus</Header>
                <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
            </Item>
        </Accordion>
    </Story>
</Preview>

### Render props

An accordion item can update is content based on the `isOpen` value by providing a render prop function.

<Preview>
    <Story name="render props">
        <Accordion>
            <Item>
                {({ isOpen }) => (
                    <Fragment>
                        <Header className={isOpen ? "primary-600" : undefined} as="h3">
                            Mars
                        </Header>
                        <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
                    </Fragment>
                )}
            </Item>
            <Item>
                {({ isOpen }) => (
                    <Fragment>
                        <Header className={isOpen ? "primary-600" : undefined} as="h3">
                            Jupiter
                        </Header>
                        <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
                    </Fragment>
                )}
            </Item>
            <Item>
                {({ isOpen }) => (
                    <Fragment>
                        <Header className={isOpen ? "primary-600" : undefined} as="h3">
                            Venus
                        </Header>
                        <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
                    </Fragment>
                )}
            </Item>
        </Accordion>
    </Story>
</Preview>

### Custom components

The previous [render props](#render-props) example could also be achieve with a custom component.

<FilePreview filePath="/accordion/docs/CustomAccordion">
    <CustomAccordion />
</FilePreview>

### Data items

You can supply accordion items with an array instead of using the granular components.

<Preview>
    <Story name="data render">
        <Accordion aria-label="Planets">
            {[
                { header: "Mars", content: "Mars is the fourth planet from the Sun and the second-smallest planet." },
                { header: "Jupiter", content: "Jupiter is the fifth planet from the Sun and the largest in the Solar System." },
                { header: "Venus", content: "Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty." }
            ]
                .map(({ header, content }) =>
                    <Item key={header}>
                        <Header as="h3">{header}</Header>
                        <Content>{content}</Content>
                    </Item>
                )}
        </Accordion>
    </Story>
</Preview>

### Disabled

An accordion item can be disabled.

<Preview>
    <Story name="disabled item">
        <Accordion>
            <Item>
                <Header as="h3">Mars</Header>
                <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
            </Item>
            <Item disabled>
                <Header as="h3">Jupiter</Header>
                <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
            </Item>
            <Item>
                <Header as="h3">Venus</Header>
                <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
            </Item>
        </Accordion>
    </Story>
</Preview>

### Size

An accordion header can vary in size.

<Preview>
    <Story name="size">
        <Stack>
            <Accordion>
                <Item>
                    <Header size="sm" as="h3">Mars</Header>
                    <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
                </Item>
                <Item>
                    <Header size="sm" as="h3">Jupiter</Header>
                    <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
                </Item>
                <Item>
                    <Header size="sm" as="h3">Venus</Header>
                    <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
                </Item>
            </Accordion>
            <Accordion>
                <Item>
                    <Header as="h3">Mars</Header>
                    <Content>Mars is the fourth planet from the Sun and the second-smallest planet.</Content>
                </Item>
                <Item>
                    <Header as="h3">Jupiter</Header>
                    <Content>Jupiter is the fifth planet from the Sun and the largest in the Solar System.</Content>
                </Item>
                <Item>
                    <Header as="h3">Venus</Header>
                    <Content>Venus is the second planet from the Sun. It is named after the Roman goddess of love and beauty.</Content>
                </Item>
            </Accordion>
        </Stack>
    </Story>
</Preview>

### Controlled

The selected `index` can be handled in controlled mode.

<FilePreview filePath="/accordion/docs/ControlledAccordion">
    <ControlledAccordion />
</FilePreview>

## Props

### Accordion

<Props of={InnerAccordion} />

### Item

<Props of={InnerItem} />

### Header

<Props of={InnerHeader} />

### Content

<Props of={InnerContent} />

### AccordionHeader

<dl>
    <div>
        <dt>slots</dt>
        <dd>icon | text</dd>
    </div>
</dl>

<Props of={InnerAccordionHeader} />

### AccordionPanel

<Props of={InnerAccordionPanel} />

<Story
    name="ref"
    parameters={paramsBuilder()
        .excludeFromDocs()
        .build()}
>
    <RefLogger>
        <Accordion>
            <Item>
                <Header as="h3">Mars</Header>
                <Content>Mars is the fourth planet from the Sun and the second-smallest planet in the Solar System.</Content>
            </Item>
        </Accordion>
    </RefLogger>
</Story>
