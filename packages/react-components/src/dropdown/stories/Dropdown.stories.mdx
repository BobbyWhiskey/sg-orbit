import { ControlledDropdown } from "./ControlledDropdown.sample";
import { CustomLink } from "./CustomLink.jsx";
import { CustomTrigger } from "./CustomTrigger.sample.jsx";
import {
    Dropdown,
    InnerDropdown,
    InnerDropdownBasicTrigger,
    InnerDropdownButtonItem,
    InnerDropdownCarret,
    InnerDropdownItem,
    InnerDropdownLinkItem,
    InnerDropdownMenu,
    InnerDropdownTitle,
    InnerDropdownTrigger
} from "@react-components/dropdown";
import { FilePreview, InstallReactComponents, Props, ReactComponentsLayout } from "@blocks";
import { FolderIcon, HelpIcon, IconGroup, InfoIcon, SignoutIcon, VerticalDotsIcon, WarningIcon } from "@react-components/icons";
import { IconButton } from "@react-components/button";
import { Meta, Preview, Story } from "@storybook/addon-docs/blocks";
import { RefLogger, createComponentSection, paramsBuilder } from "@utils";
import { logClicked } from "./utils";
import CustomTriggerCode from "./CustomTriggerCode.mdx";
import Imports from "./Imports.mdx";

<Meta
    title={createComponentSection("Dropdown")}
    parameters={paramsBuilder()
        .canvasLayout({ width: "80%" })
        .docsLayout(<ReactComponentsLayout sourcePath="/packages/react-components/src/dropdown" />)
        .build()}
/>

# Dropdown

A dropdown can be used to offer a list of choices.

## Installation

<InstallReactComponents imports={<Imports />} />

## Props

<Props
    componentsDefinitions={[
        { displayName: "Dropdown", component: InnerDropdown },
        { displayName: "Dropdown.Trigger", component: InnerDropdownTrigger },
        { displayName: "Dropdown.BasicTrigger", component: InnerDropdownBasicTrigger },
        { displayName: "Dropdown.Menu", component: InnerDropdownMenu },
        { displayName: "Dropdown.LinkItem", component: InnerDropdownLinkItem },
        { displayName: "Dropdown.ButtonItem", component: InnerDropdownButtonItem },
        { displayName: "Dropdown.Item", component: InnerDropdownItem },
        { displayName: "Dropdown.Title", component: InnerDropdownTitle },
        { displayName: "Dropdown.Carret", component: InnerDropdownCarret }
    ]}
/>

## Usage

### Basic trigger

A dropdown can use a basic textual trigger.

<Preview>
    <Story name="basic trigger">
        <Dropdown>
            <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
            <Dropdown.Menu>
                <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

A basic trigger can have an icon.

<Preview>
    <Story name="basic trigger with icon">
        <Dropdown>
            <Dropdown.BasicTrigger icon={<FolderIcon />}>Task</Dropdown.BasicTrigger>
            <Dropdown.Menu>
                <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

### Button trigger

A dropdown can have a [button](?path=/docs/components-button--default-story) component as trigger.

<Preview>
    <Story name="button trigger">
        <Dropdown>
            <Dropdown.Trigger as={IconButton} color="secondary" shape="circular">
                <VerticalDotsIcon />
            </Dropdown.Trigger>
            <Dropdown.Menu>
                <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

### Custom trigger

A dropdown can have a custom trigger component. The trigger must be able to [receive focus](https://developer.mozilla.org/en-US/docs/Web/Accessibility/Understanding_WCAG/Keyboard) to enable keyboard navigation.

<Preview>
    <Story name="custom trigger">
        <Dropdown>
            <Dropdown.Trigger as={CustomTrigger}>
                Task
            </Dropdown.Trigger>
            <Dropdown.Menu>
                <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

<CustomTriggerCode />

### Button items

A dropdown can contains button items.

<Preview>
    <Story name="button items">
        <Dropdown>
            <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
            <Dropdown.Menu>
                <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

### Link items

A dropdown can contains link items.

<Preview>
    <Story name="link items">
        <Dropdown>
            <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
            <Dropdown.Menu>
                <Dropdown.LinkItem href="https://www.sharegate.com" target="_blank">Launch...</Dropdown.LinkItem>
                <Dropdown.LinkItem href="https://www.sharegate.com" target="_blank">Eject...</Dropdown.LinkItem>
                <Dropdown.LinkItem href="https://www.sharegate.com" target="_blank">Land...</Dropdown.LinkItem>
                <Dropdown.LinkItem href="https://www.sharegate.com" target="_blank">Help</Dropdown.LinkItem>
                <Dropdown.LinkItem href="https://www.sharegate.com" target="_blank">Exit</Dropdown.LinkItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

### Custom link item component

A dropdown link item can be a custom component like a [React Router Link](https://reacttraining.com/react-router/web/api/Link).

<Preview>
    <Story name="link component">
        <Dropdown>
            <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
            <Dropdown.Menu>
                <Dropdown.LinkItem as={CustomLink} href="https://www.sharegate.com" target="_blank">Launch...</Dropdown.LinkItem>
                <Dropdown.LinkItem as={CustomLink} href="https://www.sharegate.com" target="_blank">Eject...</Dropdown.LinkItem>
                <Dropdown.LinkItem as={CustomLink} href="https://www.sharegate.com" target="_blank">Land...</Dropdown.LinkItem>
                <Dropdown.LinkItem as={CustomLink} href="https://www.sharegate.com" target="_blank">Help</Dropdown.LinkItem>
                <Dropdown.LinkItem as={CustomLink} href="https://www.sharegate.com" target="_blank">Exit</Dropdown.LinkItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

### Divider

A dropdown items can be divided.

<Preview>
    <Story name="divider">
        <Dropdown>
            <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
            <Dropdown.Menu>
                <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                <Dropdown.Divider />
                <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

### Header

A dropdown can contains titles to identify sections.

<Preview>
    <Story name="header">
        <Dropdown>
            <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
            <Dropdown.Menu>
                <Dropdown.Header>Quick Actions</Dropdown.Header>
                <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

### Size

A dropdown can vary in size.

<Preview>
    <Story name="size">
        <div className="flex">
            <div className="mr12">
                <Dropdown size="small">
                    <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
                    <Dropdown.Menu>
                        <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
                    </Dropdown.Menu>
                </Dropdown>
            </div>
            <div className="mr12">
                <Dropdown>
                    <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
                    <Dropdown.Menu>
                        <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
                    </Dropdown.Menu>
                </Dropdown>
            </div>
            <div>
                <Dropdown size="large">
                    <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
                    <Dropdown.Menu>
                        <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
                    </Dropdown.Menu>
                </Dropdown>
            </div>
        </div>
    </Story>
</Preview>

### Upward

A dropdown prefered vertical opening position can be upward.

<Preview>
    <Story name="upward">
        <Dropdown upward>
            <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
            <Dropdown.Menu>
                <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

### Direction

A dropdown prefered horizontal opening position can be `"left"` or `"right"`.

<Preview>
    <Story name="direction">
        <div className="flex">
            <div className="mr12">
                <Dropdown direction="left">
                    <Dropdown.BasicTrigger>Left</Dropdown.BasicTrigger>
                    <Dropdown.Menu>
                        <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
                    </Dropdown.Menu>
                </Dropdown>
            </div>
            <div>
                <Dropdown direction="right">
                    <Dropdown.BasicTrigger>Right</Dropdown.BasicTrigger>
                    <Dropdown.Menu>
                        <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Land...</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                        <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
                    </Dropdown.Menu>
                </Dropdown>
            </div>
        </div>
    </Story>
</Preview>

### Controlled

A dropdown can handle `open` state in controlled mode.

<FilePreview filePath="/dropdown/stories/ControlledDropdown">
    <ControlledDropdown />
</FilePreview>

## Item

### Description

A dropdown item can have a description.

<Preview>
    <Story name="item description">
        <Dropdown>
            <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
            <Dropdown.Menu>
                <Dropdown.ButtonItem description="ctrl + l" onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem description="ctrl + e" onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem description="ctrl + shift + l" onClick={logClicked}>Land...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem description="ctrl + h" onClick={logClicked}>Help</Dropdown.ButtonItem>
                <Dropdown.ButtonItem description="ctrl + alt + del" onClick={logClicked}>Exit</Dropdown.ButtonItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

### Icons

A tag can contain left or right [icons](?path=/docs/materials-icons--page).

<Preview>
    <Story name="item icon">
        <Dropdown>
            <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
            <Dropdown.Menu>
                <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem iconLeft={<IconGroup><WarningIcon /><InfoIcon /></IconGroup>} onClick={logClicked}>Land...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem iconLeft={<HelpIcon />} onClick={logClicked}>Help</Dropdown.ButtonItem>
                <Dropdown.ButtonItem iconRight={<SignoutIcon />} onClick={logClicked}>Exit</Dropdown.ButtonItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

### Disabled

A dropdown item can be disabled.

<Preview>
    <Story name="item disabled">
        <Dropdown>
            <Dropdown.BasicTrigger>Task</Dropdown.BasicTrigger>
            <Dropdown.Menu>
                <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem disabled onClick={logClicked}>Eject...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem disabled onClick={logClicked}>Land...</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Help</Dropdown.ButtonItem>
                <Dropdown.ButtonItem onClick={logClicked}>Exit</Dropdown.ButtonItem>
            </Dropdown.Menu>
        </Dropdown>
    </Story>
</Preview>

<Story
    name="ref"
    parameters={paramsBuilder()
        .excludeFromDocs()
        .build()}
>
    <RefLogger>
        <Dropdown>
            <Dropdown.Trigger>Task</Dropdown.Trigger>
            <Dropdown.Menu>
                <Dropdown.ButtonItem onClick={logClicked}>Launch...</Dropdown.ButtonItem>
            </Dropdown.Menu>
        </Dropdown>
    </RefLogger>
</Story>

