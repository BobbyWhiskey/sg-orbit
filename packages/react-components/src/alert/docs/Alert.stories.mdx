import { Alert, CriticalAlert, InfoAlert, InnerAlert, SuccessAlert, WarningAlert } from "@react-components/alert";
import { Button } from "@react-components/button";
import { Content } from "@react-components/view";
import { ControlledAlert } from "./ControlledAlert.sample";
import { EmailIcon } from "@react-components/icons";
import { FilePreview, ReactComponentsLayout } from "@blocks";
import { Heading, Paragraph } from "@react-components/text";
import { Meta, Preview, Props, Story } from "@storybook/addon-docs/blocks";
import { RefLogger, paramsBuilder } from "@utils";
import { TextLink } from "@react-components/link";

<Meta
    title="Feedback|Alert"
    parameters={paramsBuilder()
        .canvasLayout({ width: "80%" })
        .docsLayout(<ReactComponentsLayout sourcePath="/packages/react-components/src/alert/src" />)
        .build()}
/>

# Alert

An alert is an element that displays a brief, important message in a way that attracts the user's attention without interrupting the user's task.

<dl>
    <div>
        <dt>usage</dt>
        <dd>import Alert from @orbit-ui/react-components</dd>
    </div>
    <div>
        <dt>slots</dt>
        <dd>icon | content | button</dd>
    </div>
    <div>
        <dt>wai-aria</dt>
        <dd><a href="https://www.w3.org/TR/wai-aria-practices/#alert">https://www.w3.org/TR/wai-aria-practices/#alert</a></dd>
    </div>
</dl>

## Content

An alert must have textual content and can optionnaly accept an icon, an action and be dismissible. Text only alert accept a string as children. An icon and an action button can also be added as children, with a sibling content element for the textual content.

### Icon

An alert can have an icon.

<Preview withSource="open">
    <Story name="icon">
        <Alert>
            <EmailIcon />
            <Content>Your email to <strong>booking@spacetravel.com</strong> has been sent!</Content>
        </Alert>
    </Story>
</Preview>

### Rich content

An alert can also accept rich content.

<Preview withSource="open">
    <Story name="rich content">
        <Alert>
            <EmailIcon />
            <Content>
                <Heading>booking@spacetravel.com</Heading>
                Your email has been sent! Tracking info available <TextLink href="#">here</TextLink>.
            </Content>
        </Alert>
    </Story>
</Preview>

### Action

An alert can accept an accept button.

<Preview withSource="open">
    <Story name="action">
        <Alert>
            <EmailIcon />
            <Content>Your email to <strong>booking@spacetravel.com</strong> has been sent!</Content>
            <Button>Undo</Button>
        </Alert>
    </Story>
</Preview>

### Dismissible

An alert can be dismissible by specifying an `onDismiss` handler.

<Preview withSource="open">
    <Story name="dismissible">
        <Alert onDismiss={() => {}}>
            <EmailIcon />
            <Content>Your email to <strong>booking@spacetravel.com</strong> has been sent!</Content>
            <Button>Undo</Button>
        </Alert>
    </Story>
</Preview>

## Templates

An alert comes in predefined templates matching the available tones.

### Info

<Preview withSource="open">
    <Story name="info">
        <InfoAlert onDismiss={() => {}}>
            <Content>Your email to <strong>booking@spacetravel.com</strong> has been sent!</Content>
            <Button>Undo</Button>
        </InfoAlert>
    </Story>
</Preview>

### Success

<Preview withSource="open">
    <Story name="success">
        <SuccessAlert onDismiss={() => {}}>
            <Content>Your email to <strong>booking@spacetravel.com</strong> has been sent!</Content>
            <Button>Undo</Button>
        </SuccessAlert>
    </Story>
</Preview>

### Warning

<Preview withSource="open">
    <Story name="warning">
        <WarningAlert onDismiss={() => {}}>
            <Content>We are having trouble contacting the email server.</Content>
            <Button>Retry</Button>
        </WarningAlert>
    </Story>
</Preview>

### Critical

<Preview withSource="open">
    <Story name="critical">
        <CriticalAlert onDismiss={() => {}}>
            <Content>Cannot contact email server.</Content>
            <Button>Retry</Button>
        </CriticalAlert>
    </Story>
</Preview>

### Controlled

An alert can handle `show` state in controlled mode.

<FilePreview filePath="/alert/docs/ControlledAlert">
    <ControlledAlert />
</FilePreview>

## Props

<Props of={InnerAlert} />

<Story
    name="ref"
    parameters={paramsBuilder()
        .excludeFromDocs()
        .build()}
>
    <RefLogger>
        <Alert>Your email to <strong>booking@spacetravel.com</strong> has been sent!</Alert>
    </RefLogger>
</Story>
