import "./PinnedPopover.css";

import { ArgsTable, Meta, Story } from "@storybook/addon-docs/blocks";
import { Box } from "@react-components/box";
import { Button } from "@react-components/button";
import { ComponentInfo, Preview, Tagline } from "@stories/components";
import { InnerPopover, Popover } from "@react-components/popover";
import { TextLink } from "@react-components/link";

<Meta
    title="Components/Popover"
    id="popover"
/>

export function Square({ children }) {
    return (
        <Box
            className="bg-primary-300"
            style={{
                width: "75px",
                height: "75px"
            }}
        >
            {children}
        </Box>
    );
}

# Popover

<Tagline>A Popover can be used to display some content on top of another.</Tagline>

<ComponentInfo
    usage={"import { Popover } from \"@orbit-ui/react-components\""}
    githubPath="/packages/react-components/src/popover/src"
/>

## Usage

A popover accepts exactly two children: the element which triggers the opening of the popover and the popover content. A trigger can be any component which handles `onClick` and `ref` props.

#### This is not a tooltip

A popover is not meant to be used as a tooltip but rather as a low level component to build something more complex. A tooltip is a specialization of a popper, if you need a component that behave like a tooltip, use the tooltip component instead.

### Default

A default popover using a button trigger.

<Preview scope={{ Square }}>
    <Story name="default">
        <Popover>
            <Button variant="outline">Toggle</Button>
            <Square />
        </Popover>
    </Story>
</Preview>

### Position

A popover can show at different positions.

<Preview scope={{ Square }}>
    <Story name="position">
        <Popover position="right">
            <Button variant="outline">Toggle</Button>
            <Square />
        </Popover>
    </Story>
</Preview>

### Offset

A popover can have an horizontal and / or vertical offset.

<Preview scope={{ Square }}>
    <Story name="offset">
        <Popover offset={[0, 8]}>
            <Button variant="outline">Toggle</Button>
            <Square />
        </Popover>
    </Story>
</Preview>

### Pinned

A popover automatic repositioning features can be disabled. When disabled, the popover will always be placed according to the specified position value. Automatic repositioning features are Popper.js [flip](https://popper.js.org/docs/v2/modifiers/flip/) and [prevent overflow](https://popper.js.org/docs/v2/modifiers/prevent-overflow/) features.

<Preview scope={{ Square }} filePath="/popover/docs/PinnedPopover" />

### Render props

A popover can update is content based on the `isVisible` value and optionally use the `hide` function by providing a render prop function:

<Preview scope={{ Square }}>
    <Story name="render props">
        <Popover>
            {({ isVisible, hide }) => (
                <>
                    <Button color={isVisible ? "secondary" : "primary"}>Toggle</Button>
                    <Square>
                        <TextLink
                            as="button"
                            className="mt6 ml5"
                            onClick={hide}
                        >
                            Close
                        </TextLink>
                    </Square>
                </>
            )}
        </Popover>
    </Story>
</Preview>

### Popover context

The previous render props example could also be achieve by using `usePopoverContext`.

<Preview scope={{ Square }} filePath="/popover/docs/PopoverContext" noInline />

### Controlled

The visibility state can be handled in controlled mode.

<Preview scope={{ Square }} filePath="/popover/docs/ControlledPopover" />

## API

### Popover

<ComponentInfo
    usage={"import { Popover } from \"@orbit-ui/react-components\""}
    compact
/>

<ArgsTable of={InnerPopover} />


