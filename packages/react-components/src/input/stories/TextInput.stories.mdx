import { CrossIcon, MagnifierIcon } from "@react-components/icons";
import { EmailValidation } from "./EmailValidation.sample";
import { FilePreview, InstallReactComponents, Props, ReactComponentsLayout } from "@blocks";
import { IconButton } from "@react-components/button";
import { Inline } from "@react-components/layout";
import { InnerPasswordInput, InnerTextInput, PasswordInput, TextInput } from "@react-components/input";
import { Meta, Preview, Story } from "@storybook/addon-docs/blocks";
import { RefLogger, createComponentSection, paramsBuilder } from "@utils";
import Imports from "./TextInputImports.mdx";

<Meta
    title={createComponentSection("TextInput")}
    parameters={paramsBuilder()
        .canvasLayout({ width: "80%" })
        .docsLayout(<ReactComponentsLayout sourcePath="/packages/react-components/src/input/src" />)
        .build()}
/>

# TextInput

A text input allow a user to enter and edit a text.

## Installation

<InstallReactComponents imports={<Imports />} />

## Props

<Props
    componentsDefinitions={[
        { displayName: "TextInput", component: InnerTextInput },
        { displayName: "PasswordInput", component: InnerPasswordInput }
    ]}
/>

## Usage

### Default

A default text input.

<Preview>
    <Story name="default">
        <TextInput placeholder="Where to?" />
    </Story>
</Preview>

### Label

A text input can be identified by a label.

<Preview>
    <Story name="label">
        <Inline>
            <TextInput label="Where to?" />
            <TextInput label="Where to?" required />
        </Inline>
    </Story>
</Preview>

### Value

A text input can have a value.

<Preview>
    <Story name="value">
        <TextInput defaultValue="Deep space" placeholder="Where to?" />
    </Story>
</Preview>

### Icon

A text input can contain left or right [icons](?path=/docs/materials-icons--page). [button](?path=/docs/components-button--default-story) or text elements.

<Preview>
    <Story name="icon">
        <Inline>
            <TextInput iconLeft={<MagnifierIcon />} placeholder="Where to?" />
            <TextInput iconRight={<MagnifierIcon />} placeholder="Where to?" />
        </Inline>
    </Story>
</Preview>

### Button

A text input can contain a [button](?path=/docs/components-button--default-story).

<Preview>
    <Story name="button">
        <Inline>
            <TextInput button={<IconButton><CrossIcon /></IconButton>} placeholder="Where to?" />
        </Inline>
    </Story>
</Preview>

### Size

A text input can vary in size.

Can be set to: `"small"`, `"large"` or omitted.

<Preview>
    <Story name="size">
        <Inline align="end">
            <TextInput size="small" fluid placeholder="Where to?" />
            <TextInput fluid placeholder="Where to?" />
            <TextInput size="large" fluid placeholder="Where to?" />
        </Inline>
    </Story>
</Preview>

### Disabled

A text input can be disabled.

<Preview>
    <Story name="disabled">
        <TextInput disabled placeholder="Where to?" />
    </Story>
</Preview>

### Readonly

A text input can be readonly.

<Preview>
    <Story name="readonly">
        <TextInput readOnly value="Deep space" />
    </Story>
</Preview>

### Loading

A text input can show that it is currently loading data.

<Preview>
    <Story name="loading">
        <TextInput loading />
    </Story>
</Preview>

### Fluid

A text input can take the width of its container.

<Preview>
    <Story name="fluid">
        <TextInput fluid placeholder="Where to?" />
    </Story>
</Preview>

### Message

A message can be displayed beneath a text input.

<Preview>
    <Story name="help">
        <Inline>
            <TextInput help="Your space id is a 9-digit number on the top right corner of your membership card." label="Space ID" placeholder="999-999-999" />
            <TextInput invalidMessage="Invalid space id." validationState="invalid" label="Space ID" placeholder="999-999-999" />
            <TextInput validMessage="Have a safe flight!" validationState="valid" label="Space ID" placeholder="999-999-999" />
        </Inline>
    </Story>
</Preview>

### Transparent

A text input can be transparent.

<Preview>
    <Story name="transparent">
        <TextInput variant="transparent" placeholder="Where to?" />
    </Story>
</Preview>

### Validation

A text input can display a validation state to communicate to the user whether the current value is valid or invalid. Implement your own validation logic in your app and pass either "valid" or "invalid" to the text input via the `validationState` prop.

The example below illustrates how one would validate if the user has entered a valid email.

<FilePreview filePath="/input/stories/EmailValidation">
    <EmailValidation />
</FilePreview>

<Story
    name="ref"
    parameters={paramsBuilder()
        .excludeFromDocs()
        .build()}
>
    <RefLogger><TextInput /></RefLogger>
</Story>

## PasswordInput

A specialized text input that show / hide a password.

<Preview>
    <Story name="password">
        <PasswordInput />
    </Story>
</Preview>
